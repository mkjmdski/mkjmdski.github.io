language: go
sudo: required
services:
  - docker
script:
  - CHANGED_FILES=($(git diff --name-only $TRAVIS_COMMIT_RANGE))
  - echo $CHANGED_FILES
  # - ./build_cv.sh
  - ./build_dist.sh
  - ./build_api.sh
branches:
  only:
    - master
deploy:
  provider: pages
  skip-cleanup: true
  github-token: $github_token
  keep-history: true
  local-dir: production
  target-branch: production
  verbose: true
  on:
    branch: master